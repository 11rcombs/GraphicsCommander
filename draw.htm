<!DOCTYPE html>
<html>
	<head>
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="viewport" content="user-scalable=no, minimum-scale=1, maximum-scale=1, initial-scale=1"
		<link rel="icon" href="favicon.png"/>
		<script src="/socket.io/socket.io.js"></script>
		<script>
"use strict";
var socket = io.connect();
var sketchpad;

document.addEventListener("DOMContentLoaded", function(){
	sketchpad = document.getElementById("sketchpad");
	var context = sketchpad.ctx = sketchpad.getContext("2d");

// create a drawer which tracks touch movements
var drawer = {
   isDrawing: false,
   touchstart: function(coors, coors2){
      sketchpad.ctx.beginPath();
      sketchpad.ctx.moveTo(coors.x, coors.y);
      this.isDrawing = true;
   },
   touchmove: function(coors, coors2){
      if (this.isDrawing) {
         sketchpad.ctx.lineTo(coors.x, coors.y);
         sketchpad.ctx.stroke();
      }
   },
   touchend: function(coors){
      if (this.isDrawing) {
         this.isDrawing = false;
      }
   }
};

	// attach the touchstart, touchmove, touchend event listeners.
	sketchpad.addEventListener('touchstart',draw, false);
	sketchpad.addEventListener('touchmove',draw, false);
	sketchpad.addEventListener('touchend',draw, false);
	document.getElementById("court").addEventListener("load", function(){
		sketchpad.ctx.drawImage(this, 0, 0, 720, 480);
	}, false);

// create a function to pass touch events and coordinates to drawer
function draw(event){
   // get the touch coordinates
   if(event.targetTouches.length > 0){
   	var coors = {
   	   x: event.targetTouches[0].pageX,
   	   y: event.targetTouches[0].pageY
   	};
	var coors2 = event.targetTouches;
   }
   // pass the coordinates to the appropriate handler
   drawer[event.type](coors,coors2);
}
// prevent elastic scrolling
window.addEventListener('touchmove',function(event){
  event.preventDefault();
},false);	// end body:touchmove
}, false);

		</script>
		<title>LiveText Remote Interface</title>
	</head>
	<body>
		<div style="display: block; float: left;">
			<div id="container">
				<canvas id="sketchpad" style="border: 1px solid black;" height="480" width="720">
				</canvas>
			</div>
		</div>
		<div style="display: none" id="background_images">
			<img id="court" src="/images/basketball_court.png">
			<img id="half_court" src="/images/half_court.png">
		</div>
	</body>
</html>